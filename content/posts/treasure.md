---
title: "VOYAGE GROUPのインターン「Treasure」に参加して"
date: 2020-10-01T09:43:00+09:00
description: "8/1, 8, 15の土曜日と8/17~28の約1ヶ月の期間、VOYAGE GROUPのTreasureというインターンに参加してきました。"
tags: ["intern", "treasure", "voyage group"]
draft: false
---

こんにちは、[くどあ](https://twitter.com/kudoadd)です。

8/1, 8, 15の土曜日と8/17~28の約1ヶ月の期間、VOYAGE GROUPのTreasureというインターンに参加してきました。

![treasure1](img/posts/treasure1.png)

参加してからだいぶ日にちが空いてしまいましたが、振り返ろうと思います。最初は参加の経緯や事前講義、チーム開発まで色々書こうと思っていたのですが、考えあぐねている間に時間だけ過ぎてしまいました...汗。なのでTreasureの詳細は他の参加者の方に任せるとして、ここでは自分が特に学んだことについて言及したいと思います。

## 学んだこと/感想

Treasureでは3日間という短い期間でWeb技術全般を網羅的学習したのちに、2週間のチーム開発を行いました。私は今まで個人開発でサービスやアプリを作りながら技術に触れてきましたが、チームで行うことは初めてで全くの素人でした。

本当にたくさんのことを学んで全て書ききることは到底できませんが。チーム開発をしていて気づいたことやサポーターの方に言われて印象深かったことについて3つだけまとめます。

### 失敗するタイミングを早くする

私たちのチームでは「失敗することは悪いことではない」ということを念頭において開発を進めました。なのでどんどん失敗して改善するサイクルを早く回すようにしていました。

#### KPT

失敗して改善するサイクルを早く回す手法の一つとしてKPTというものを導入しました。KPTとは、**Keep：続けるべきこと、P：抱えている問題、Try：次にトライしたいこと**の3つで改善のサイクルを早く回すフレームワークの一つです。実際に1日に2-3回ずつ5分程度時間をとり、行いました。

![treasure2](img/posts/treasure2.png)

> 私たちのチームで使用した実際のKPTの抜粋

#### 技術検証

開発に取り掛かる前に、実装する上で一番不安になりそうな部分を、先に本当に実現可能なのか技術検証を行いました。私たちのチームではメール配信や決済、オンラインミーティング作成、認証などの多くの機能が実装する必要がありました。そのために外部サービスを使用する計画をしていましたが、いざ実装する時になってから使えないことが分かると、新たに計画を立て直さなければならず余計な時間を使ってしまいます。先に技術検証を行っておけば、別のサービスへの選択肢や実装プランの変更などを余裕を持って行うことができます。その後の開発が上手くいったことを踏まえると、行って良かったと感じました。

#### 初期段階のCI/CDの導入

開発の初期段階にCIの導入し、静的解析や自動テストを行いました。CIは失敗を先に検知する一つの手段です。本番環境でバグる前にあらかじめ、先にバグを見つけることで効率的に開発ができました。

![treasure3](img/posts/treasure3.png)

> チームで使用していたGitHub Actions Workflows

ポイントとして感じたのは、**CI/CDの導入は開発初期にやるべき**だということです。開発は後になればなるほど切迫して心理的余裕がなくなります。「今、開発の進歩ではないCI/CDを導入している暇じゃない！」となります。開発初期に導入することは先行投資の意味が強くその利益を感じにくいですが、やっておくことが重要だと感じました。

### 相手を思いやる

#### issueやPRは端的に

当たり前のことですが、チームで行う以上はメンバーを思いやって進めていく必要があります。私たちのチームではざっくりフロントエンドとバックエンドで分けて実装を行いましたが、それぞれどこをやっているのかやお互いに気づいた課題をissueベースで共有しながら行いました。少し細かい話かもしれませんが、issueやPRの書き方も<u>どういう課題があって何をしてどうしたのか</u>を端的に記述したり、関連したissueに紐づけることを学びました。

#### 利用する開発者を意識したAPI設計

APIの設計はフロントとバックでベストが違うことがあります。例えばGETで記事の詳細情報を取得するAPIで、一緒にユーザー情報も取得したいとします。データベースがUserとPostで分かれている場合、一番簡単なのは以下のレスポンスです。

```json
  // backendのベスト
  {
    user_id: 1,
    title: 'treasureは最高だった'
    content: '...'
  }
```

ただし上記の実装だと、フロントはuser_idが誰なのか分かりません。そのため`user_id`を使ってユーザー情報を取得するAPIをもう一度叩く必要があります。フロントとしてベストではありません。フロントからすると一緒にユーザー情報を返してくれると1回で必要な情報が全て取れるのでありがたいです。

```json
  // frontendのベスト
  {
    user: {
      name: 'kudoa',
      location: 'Japan'
      age: 23,
    },
    title: 'treasureは最高だった'
    content: '...'
  }
```

バックエンドからすると、Postテーブルで取得したuser_idでUserテーブルをselectしてユーザー情報を取得することになるので作業が増えます。どっちの設計が良いかはさておき、ここで伝えたかったのは、どっちの立場をとるかでベストが設計が変わるということです。APIは誰が使うのか、その人のためになっている実装なのかを1つの軸として考えるのが重要だと思いました。

また先にAPIの仕様をドキュメントとして残しておくことも重要だと感じました。最低限、返すデータやPOSTやPATCHで欲しいJSONの型を定義しておく必要があります。フロント側とすると、APIを叩くまで返すデータ型が分からない、想定と違うものが返ってくる、POSTでbad requestが返ってくるなどあると、バックエンドのコードを読みにいく必要があるので結構辛いことになります。

エラーコードやエラーメッセージについてもしっかり決めておく必要があります。何でもかんでも500返ってくる設計だとフロントが悪いのかバックエンドが悪いのかが分かりません。しっかり開発者のために使い分けだと感じました。

### 人を待たない

サポーターの方に言われて印象に残っていることです。開発において、人を待っているだけの何もしない時間が生まれてしまうのはもったいないです。なので、人を待たずに自分にできることをガンガン進めていく姿勢が大事です。

例えばフロントの開発では、APIが完成していれば、実際にAPIからデータを受け取って画面の作成やロジックを作ることができます。しかし同時進行の場合は、APIのバックエンドやDBが完成していない状態で、フロントは画面だけ作らなければならないことがあります。この時にただAPIの完成を待っている時間は無駄になります。私たちの開発では、APIエンドポイントごとにPOSTでどういう形式のJSONを渡して欲しいのか、GETでどういうデータが返ってくるのか等を事前に定義していました。なので、フロントでモックのデータを用意して画面やロジックを先に作り実装を始めました。こうすることでAPIが完成した後に、データを流し込むように変更するだけですぐに実装できました。

実際に完成したものがなくても設計がしっかりしていれば、予測して色々な作業を進められることが分かりました。そのためにも最初にある程度先を想定して固めた設計があることは重要だと感じました。

## Treasureを終えて

TreasureはサポーターやTAの支援が厚く、技術的にも精神的にも成長できる素晴らしいインターンでした。今までの人生単位でもここまでのものは少なく、一生を通して忘れらない経験になったと思います。この場で学んだことをここで終わりにせずに、コンフォートゾーンを超えてより成長できるように頑張りたいです。ありがとうございました。

![treasure4](img/posts/treasure4.png)
